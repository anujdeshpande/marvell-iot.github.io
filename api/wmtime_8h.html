<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>AWS IoT Starter SDK: wmsdk/src/incl/sdk/wmtime.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Starter SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_888e8a7168914c1639e2b782ab576ffb.html">wmsdk</a></li><li class="navelem"><a class="el" href="dir_259f8adb590fc33753e622d97b880658.html">src</a></li><li class="navelem"><a class="el" href="dir_a5320c50c325612ba11f999ef1d74fbb.html">incl</a></li><li class="navelem"><a class="el" href="dir_8d6a29e47fa7a432e99c9e8c3471a4bd.html">sdk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wmtime.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Time Management Subsystem.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;wmtypes.h&gt;</code><br />
</div>
<p><a href="wmtime_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtm.html">tm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3346b04b0420b32ccf6b706551b70762"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3346b04b0420b32ccf6b706551b70762"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>time_t</b></td></tr>
<tr class="separator:a3346b04b0420b32ccf6b706551b70762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae32f449456d5f1877a9e630e92422c01"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae32f449456d5f1877a9e630e92422c01"></a>
typedef long&#160;</td><td class="memItemRight" valign="bottom"><b>suseconds_t</b></td></tr>
<tr class="separator:ae32f449456d5f1877a9e630e92422c01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0cfc2607c465aff2fa4bc6c6abb2ad9b"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#a0cfc2607c465aff2fa4bc6c6abb2ad9b">http_date_to_time</a> (const char *date)</td></tr>
<tr class="separator:a0cfc2607c465aff2fa4bc6c6abb2ad9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f8607672a9ef14db3f20078850ee68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#a14f8607672a9ef14db3f20078850ee68">wmtime_time_set</a> (const struct <a class="el" href="structtm.html">tm</a> *<a class="el" href="structtm.html">tm</a>)</td></tr>
<tr class="separator:a14f8607672a9ef14db3f20078850ee68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa531cab6fc97ec74dd34c0f7badb007"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#aaa531cab6fc97ec74dd34c0f7badb007">wmtime_time_get</a> (struct <a class="el" href="structtm.html">tm</a> *<a class="el" href="structtm.html">tm</a>)</td></tr>
<tr class="separator:aaa531cab6fc97ec74dd34c0f7badb007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79af0a1f5f446c633f1d54bb4e545c64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#a79af0a1f5f446c633f1d54bb4e545c64">wmtime_time_set_posix</a> (time_t time)</td></tr>
<tr class="separator:a79af0a1f5f446c633f1d54bb4e545c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad815a5d5243d6e0135761b443a1fc549"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#ad815a5d5243d6e0135761b443a1fc549">wmtime_time_get_posix</a> (void)</td></tr>
<tr class="separator:ad815a5d5243d6e0135761b443a1fc549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac607cf4ec69de1818d21f2ebfb51190f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtm.html">tm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#ac607cf4ec69de1818d21f2ebfb51190f">gmtime_r</a> (const time_t *time, struct <a class="el" href="structtm.html">tm</a> *result)</td></tr>
<tr class="separator:ac607cf4ec69de1818d21f2ebfb51190f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0e3f373a3ea00b37714f1b621ae0b1"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#afc0e3f373a3ea00b37714f1b621ae0b1">mktime</a> (struct <a class="el" href="structtm.html">tm</a> *<a class="el" href="structtm.html">tm</a>)</td></tr>
<tr class="separator:afc0e3f373a3ea00b37714f1b621ae0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416a0a99a5bab4c030e93d21152727f4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#a416a0a99a5bab4c030e93d21152727f4">asctime</a> (const struct <a class="el" href="structtm.html">tm</a> *<a class="el" href="structtm.html">tm</a>)</td></tr>
<tr class="separator:a416a0a99a5bab4c030e93d21152727f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6b045c0ba608d7541d9d80ea5011e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#a2d6b045c0ba608d7541d9d80ea5011e4">wmtime_init</a> (void)</td></tr>
<tr class="separator:a2d6b045c0ba608d7541d9d80ea5011e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1046c7d2b79b666cfec2f4ea5e2f5f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wmtime_8h.html#afc1046c7d2b79b666cfec2f4ea5e2f5f">wmtime_cli_init</a> (void)</td></tr>
<tr class="separator:afc1046c7d2b79b666cfec2f4ea5e2f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Time Management Subsystem. </p>
<p>This module provides the time managment APIs. Internally wireless microcontroller manages time in terms of seconds since epoch (1 Jan 1970 00:00). This representation is known as "posix time". These routines can be used to do conversions between human readable time and posix time as well as to set the system time to desired value. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a416a0a99a5bab4c030e93d21152727f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* asctime </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtm.html">tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts the broken-down time value tm into a null-terminated string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tm</td><td>This is <a class="el" href="structtm.html">tm</a> instance that is to be converted string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a statically allocated string which contains the date and time format as follows "Tue Mar 24 09:20:14 2015". The statically allocated string might be overwritten by subsequent calls to any of the date and time functions. </dd></dl>

</div>
</div>
<a class="anchor" id="ac607cf4ec69de1818d21f2ebfb51190f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtm.html">tm</a>* gmtime_r </td>
          <td>(</td>
          <td class="paramtype">const time_t *&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtm.html">tm</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert to tm structure from POSIX/Unix time (Seconds since epoch)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>This is POSIX time that is to be converted into <a class="el" href="structtm.html">tm</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>This should point to pre-allocated <a class="el" href="structtm.html">tm</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to struct tm; NULL in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a0cfc2607c465aff2fa4bc6c6abb2ad9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t http_date_to_time </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>date</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert HTTP date format to POSIX time format</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">date</td><td>HTTP date format</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure as: -WM_FAIL: Conversion failed. Invalid format/data else valid time_t value </dd></dl>

</div>
</div>
<a class="anchor" id="afc0e3f373a3ea00b37714f1b621ae0b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t mktime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtm.html">tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts to POSIX/Unix time from tm structure</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tm</td><td>This is <a class="el" href="structtm.html">tm</a> instance that is to be converted into time_t format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time_t POSIX/Unix time equivalent </dd></dl>

</div>
</div>
<a class="anchor" id="afc1046c7d2b79b666cfec2f4ea5e2f5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmtime_cli_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register wmtime cli commands for the application use</p>
<dl class="section note"><dt>Note</dt><dd>This function can be called by the application after time substystem is initialized.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure as: 0: Success non-zero: Failure </dd></dl>

</div>
</div>
<a class="anchor" id="a2d6b045c0ba608d7541d9d80ea5011e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmtime_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize time subsystem including RTC. Sets system time to 1/1/1970 00:00 (i.e. epoch 0)</p>
<dl class="section return"><dt>Returns</dt><dd>WM_SUCCESS on success, zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="aaa531cab6fc97ec74dd34c0f7badb007"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmtime_time_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtm.html">tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get date and time</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">tm</td><td>tm structure is updated to get the current value in rtc </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure as: 0: Success non-zero: Internal error </dd></dl>

</div>
</div>
<a class="anchor" id="ad815a5d5243d6e0135761b443a1fc549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t wmtime_time_get_posix </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get date and time in posix format</p>
<dl class="section return"><dt>Returns</dt><dd>time_t value from RTC </dd></dl>

</div>
</div>
<a class="anchor" id="a14f8607672a9ef14db3f20078850ee68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmtime_time_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtm.html">tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the date and time</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tm</td><td>The rtc value is updated with the values in tm structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure as: 0: Success -1: Failed validation of tm structure </dd></dl>

</div>
</div>
<a class="anchor" id="a79af0a1f5f446c633f1d54bb4e545c64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmtime_time_set_posix </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the date and time using posix time</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>The rtc value is updated with the value present in time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure as: 0: Success non-zero: Internal error </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
