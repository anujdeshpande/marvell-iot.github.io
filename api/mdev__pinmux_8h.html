<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>AWS IoT Starter SDK: wmsdk/src/incl/sdk/drivers/mdev_pinmux.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Starter SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_888e8a7168914c1639e2b782ab576ffb.html">wmsdk</a></li><li class="navelem"><a class="el" href="dir_259f8adb590fc33753e622d97b880658.html">src</a></li><li class="navelem"><a class="el" href="dir_a5320c50c325612ba11f999ef1d74fbb.html">incl</a></li><li class="navelem"><a class="el" href="dir_8d6a29e47fa7a432e99c9e8c3471a4bd.html">sdk</a></li><li class="navelem"><a class="el" href="dir_4abcf4425a2f20ed2d5999a4d787e735.html">drivers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mdev_pinmux.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GPIO Pin Multiplexer Driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="mdev_8h_source.html">mdev.h</a>&gt;</code><br />
<code>#include &lt;wmlog.h&gt;</code><br />
<code>#include &lt;lowlevel_drivers.h&gt;</code><br />
</div>
<p><a href="mdev__pinmux_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaa6c2b8b25c8c1f654157e387b5406e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa6c2b8b25c8c1f654157e387b5406e6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PINMUX_LOG</b>(...)&#160;&#160;&#160;wmlog(&quot;pinmux&quot;, ##__VA_ARGS__)</td></tr>
<tr class="separator:aaa6c2b8b25c8c1f654157e387b5406e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2e2011653aaa3c2fd24d44b9c210a15e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdev__pinmux_8h.html#a2e2011653aaa3c2fd24d44b9c210a15e">pinmux_drv_init</a> (void)</td></tr>
<tr class="separator:a2e2011653aaa3c2fd24d44b9c210a15e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeef92bfe13efdd9aafc2d588fdf75b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__mdev__t.html">mdev_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdev__pinmux_8h.html#aeeef92bfe13efdd9aafc2d588fdf75b7">pinmux_drv_open</a> (const char *name)</td></tr>
<tr class="separator:aeeef92bfe13efdd9aafc2d588fdf75b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39016d2dd5cbede5bd707630c8a6ac46"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdev__pinmux_8h.html#a39016d2dd5cbede5bd707630c8a6ac46">pinmux_drv_close</a> (<a class="el" href="struct__mdev__t.html">mdev_t</a> *dev)</td></tr>
<tr class="separator:a39016d2dd5cbede5bd707630c8a6ac46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9f975a84ef85bb1509a52b6ced7321"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdev__pinmux_8h.html#a1d9f975a84ef85bb1509a52b6ced7321">pinmux_drv_setfunc</a> (<a class="el" href="struct__mdev__t.html">mdev_t</a> *dev, int pin, int func)</td></tr>
<tr class="separator:a1d9f975a84ef85bb1509a52b6ced7321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c853bc1be7bf51ecfc5764deb2bfbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdev__pinmux_8h.html#a26c853bc1be7bf51ecfc5764deb2bfbe">pinmux_drv_get_gpio_func</a> (int pin)</td></tr>
<tr class="separator:a26c853bc1be7bf51ecfc5764deb2bfbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GPIO Pin Multiplexer Driver. </p>
<p>Various functionalities are multiplexed on the same GPIO pin as the number of Pins are limited. The functionality to be assigned to any particular pin can be configured using the PINMUX driver.</p>
<h1><a class="anchor" id="mdev_pinmux_usage"></a>
Usage</h1>
<p>A typical PINMUX device usage scenario is as follows:</p>
<ol type="1">
<li>Initialize the PINMUX driver using <a class="el" href="mdev__pinmux_8h.html#a2e2011653aaa3c2fd24d44b9c210a15e">pinmux_drv_init()</a>.</li>
<li>Open the PINMUX device handle using <a class="el" href="mdev__pinmux_8h.html#aeeef92bfe13efdd9aafc2d588fdf75b7">pinmux_drv_open()</a> call.<br />
</li>
<li>Set the alternate function using <a class="el" href="mdev__pinmux_8h.html#a1d9f975a84ef85bb1509a52b6ced7321">pinmux_drv_setfunc()</a></li>
<li>Close the PINMUX device using <a class="el" href="mdev__pinmux_8h.html#a39016d2dd5cbede5bd707630c8a6ac46">pinmux_drv_close()</a> after its use.<br />
 <a class="el" href="mdev__pinmux_8h.html#a39016d2dd5cbede5bd707630c8a6ac46">pinmux_drv_close()</a> informs the PINMUX driver to release the resources that it is holding. It is always good practice to free the resources after use.</li>
</ol>
<p>Code snippet:<br />
 Following code demonstrates how to use PINMUX driver APIs to set a pin's alternate function. </p><div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="mdev__pinmux_8h.html#a2e2011653aaa3c2fd24d44b9c210a15e">pinmux_drv_init</a>();</div>
<div class="line">       .</div>
<div class="line">       .</div>
<div class="line">       .</div>
<div class="line">  <a class="code" href="struct__mdev__t.html">mdev_t</a>* pinmux_dev = <a class="code" href="mdev__pinmux_8h.html#aeeef92bfe13efdd9aafc2d588fdf75b7">pinmux_drv_open</a>(<span class="stringliteral">&quot;MDEV_PINMUX&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (pinmux_dev == NULL)</div>
<div class="line">      err_handling();</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> err = <a class="code" href="mdev__pinmux_8h.html#a1d9f975a84ef85bb1509a52b6ced7321">pinmux_drv_setfunc</a>(pinmux_dev, pin, PINMUX_FUNCTION_0);</div>
<div class="line">  <span class="keywordflow">if</span> (err != WM_SUCESS)</div>
<div class="line">      err_handling();</div>
<div class="line">  <a class="code" href="mdev__pinmux_8h.html#a39016d2dd5cbede5bd707630c8a6ac46">pinmux_drv_close</a>(pinmux_dev);</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a39016d2dd5cbede5bd707630c8a6ac46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pinmux_drv_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__mdev__t.html">mdev_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the PINMUX device</p>
<p>This function closes the handle to PINMUX device. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>Handle to the PINMUX device returned by <a class="el" href="mdev__pinmux_8h.html#aeeef92bfe13efdd9aafc2d588fdf75b7">pinmux_drv_open()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>WM_SUCCESS on success </dd></dl>

</div>
</div>
<a class="anchor" id="a26c853bc1be7bf51ecfc5764deb2bfbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pinmux_drv_get_gpio_func </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the GPIO pinmux function for a given pin</p>
<p>The GPIO pins are multiplexed such that they can be used for various alternate functions. The required function has to be selected by setting the mux appropriately using <a class="el" href="mdev__pinmux_8h.html#a1d9f975a84ef85bb1509a52b6ced7321">pinmux_drv_setfunc()</a>. If the pin has to be used as a GPIO, use this function to get the corresponding pinmux function to be passed to <a class="el" href="mdev__pinmux_8h.html#a1d9f975a84ef85bb1509a52b6ced7321">pinmux_drv_setfunc()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>Pin number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The GPIO pinmux function for the given pin if successful. </dd>
<dd>
-1 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="a2e2011653aaa3c2fd24d44b9c210a15e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pinmux_drv_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the PINMUX driver</p>
<p>This function initializes PINMUX driver and registers it with mdev interface. </p><dl class="section return"><dt>Returns</dt><dd>WM_SUCCESS on success </dd>
<dd>
Error code otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="aeeef92bfe13efdd9aafc2d588fdf75b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__mdev__t.html">mdev_t</a>* pinmux_drv_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open PINMUX device driver</p>
<p>This function opens the handle to PINMUX device and enables application to use the device. This handle should be used in other calls related to PINMUX device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Name of mdev pinmux driver. It should be "MDEV_PINMUX" string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>handle to driver on success </dd>
<dd>
NULL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a1d9f975a84ef85bb1509a52b6ced7321"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pinmux_drv_setfunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__mdev__t.html">mdev_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set alternate function of a GPIO pin</p>
<p>Sets the alternate function for the specified pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>Handle to the PINMUX device returned by <a class="el" href="mdev__pinmux_8h.html#aeeef92bfe13efdd9aafc2d588fdf75b7">pinmux_drv_open()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>Pin to be modified </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td>Alternate function number(GPIO_PinMuxFunc_Type) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>WM_SUCCESS on success </dd>
<dd>
-WM_FAIL on error </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
